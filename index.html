<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RNG Build Optimizer - Equipment Focus</title>
<style>
    :root {
        --bg-color: #0d0d0d;
        --panel-bg: #161616;
        --accent: #00f2ff;
        --text-main: #e0e0e0;
        --border: #2a2a2a;
    }

    * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
    }

    body {
        font-family: 'Segoe UI', Tahoma, sans-serif;
        background-color: var(--bg-color); /* Forces dark background */
        color: var(--text-main);
        margin: 0;
        padding: 15px;
        line-height: 1.4;
    }

    /* Layout Logic */
    .container {
        display: flex;
        flex-direction: column;
        gap: 20px;
        max-width: 1600px;
        margin: 0 auto;
    }

    @media (min-width: 1200px) {
        .container {
            display: grid;
            grid-template-columns: 350px 1fr 350px;
        }
    }

    .panel {
        background: var(--panel-bg); /* Solid color prevents see-through overlap */
        padding: 20px;
        border-radius: 12px;
        border: 1px solid var(--border);
        position: relative;
        z-index: 1; /* Keeps standard panels behind the sticky one */
    }

    /* MOBILE "FINAL OUTPUT" STICKY FIX */
    @media (max-width: 600px) {
        /* This targets the panel containing the results */
        .container > .panel:last-of-type {
            order: -1; /* Moves results to top */
            position: sticky;
            top: 0;
            z-index: 100; /* Stays on top of everything */
            background: #1a1a1a; 
            border-bottom: 2px solid var(--accent);
            border-radius: 0 0 12px 12px;
            margin: -15px -15px 20px -15px; /* Full width bleed */
            padding: 15px;
        }

        /* Prevent the duplicate "Final Output" inner panel from breaking things */
        .panel .panel {
            background: transparent;
            border: none;
            padding: 0;
            margin: 0;
        }
    }

    /* Checkbox Fix (The "Blobs") */
    .ore-toggle {
        display: flex;
        align-items: center;
        background: #222;
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 8px;
        cursor: pointer;
        font-size: 0.85rem;
    }

    input[type="checkbox"] {
        appearance: none;
        -webkit-appearance: none;
        width: 22px;
        height: 22px;
        border: 2px solid var(--accent);
        border-radius: 4px;
        margin-right: 12px;
        flex-shrink: 0;
        position: relative;
        background: #111;
    }

    input[type="checkbox"]:checked {
        background: var(--accent);
    }

    input[type="checkbox"]:checked::after {
        content: 'âœ“';
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        color: #000;
        font-weight: bold;
    }

    /* Input Styling */
    select {
        width: 100%;
        padding: 12px;
        background: #2a2a2a;
        border: 1px solid #444;
        color: white;
        border-radius: 8px;
        font-size: 16px; /* Prevents auto-zoom */
        margin: 5px 0 15px;
    }

    /* Grid for Totems/Rings */
    .equipment-grid, .ring-slots-grid {
        display: grid;
        gap: 10px;
    }

    .equipment-grid { grid-template-columns: 1fr 1fr; }
    .ring-slots-grid { grid-template-columns: repeat(2, 1fr); }

    /* Rarity & Text */
    h2 { color: var(--accent); font-size: 1rem; margin-bottom: 10px; }
    .stat-card {
        display: flex;
        justify-content: space-between;
        padding: 5px 0;
        border-bottom: 1px solid #333;
    }

    .big-result {
        background: #000;
        padding: 15px;
        border-radius: 10px;
        border: 1px solid var(--accent);
        margin-top: 10px;
    }

    .big-result h1 { font-size: 2.5rem; margin: 0; }
</style>
</head>
<body>

<div id="museum-overlay">
    <div class="museum-content">
        <div style="display:flex; justify-content: space-between; align-items: center;">
            <h2>Museum Collection (All Voidtorn Applied)</h2>
            <button onclick="toggleMuseum()" style="background:red; color:white; border:none; padding:5px 15px; cursor:pointer; border-radius:5px;">Close</button>
        </div>
        <div id="museum-container"></div>
    </div>
</div>

<div class="container">
    <div class="panel">
        <h2>Loadout & Passives</h2>
        
        <h3>Pans</h3>
        <div class="input-group">
            <select id="equip-pan" onchange="calculate()">
                <option value="none">No Pan</option>
                <option value="blightflow">Blightflow Pan</option>
                <option value="gingerbread">Gingerbread Pan</option>
                <option value="abyssal">Abyssal Pan</option>
            </select>
        </div>
        <div class="input-group">
            <label style="font-size:0.75rem; color:#888;">Enchant</label>
            <select id="pan-enchant" onchange="calculate()">
                <option value="none">None</option>
                <option value="glowing">Glowing (+25% Shake Spd)</option>
                <option value="cosmic">Cosmic (+50 Cap, +3 Shake Str)</option>
            </select>
        </div>
<h3>Shovel Enchant</h3>
        <div class="input-group">
            <select id="shovel-enchant" onchange="calculate()">
                <option value="none">No Enchant</option>
                <option value="non_euclidian">Non-Euclidian (+0.5x Cap)</option>
                <option value="rhythmic">Rhythmic (+0.3x Luck)</option>
            </select>
        </div>
        <h3>Global Modifiers & Totems</h3>
        <label class="ore-toggle"><input type="checkbox" id="mastery-luck" onchange="calculate()" checked> Mastery Luck (0.25x)</label>
        <label class="ore-toggle"><input type="checkbox" id="runes-luck" onchange="calculate()" checked> Runes Luck (1.2x)</label>
        <label class="ore-toggle"><input type="checkbox" id="runes-spd" onchange="calculate()" checked> Runes Shake Speed (25%)</label>
        <label class="ore-toggle" style="color:#ffd700;"><input type="checkbox" id="prospector-mvp" onchange="calculate()"> Prospector MVP (0.15x Luck/Cap)</label>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px; margin-top: 5px;">
            <label class="ore-toggle"><input type="checkbox" id="totem-luck" onchange="calculate()"> Luck Totem</label>
            <label class="ore-toggle"><input type="checkbox" id="totem-str" onchange="calculate()"> Str Totem</label>
            <label class="ore-toggle" style="grid-column: span 2;"><input type="checkbox" id="totem-lumi" onchange="calculate()"> Lumiant Totem (Cap/Spd)</label>
        </div>
        
        <button class="open-museum-btn" onclick="toggleMuseum()">Open Museum</button>

        <div style="margin-top:20px; padding:10px; background:#111; border-radius:5px; font-size:0.75rem; color:#666;">
            <strong>Base Stats:</strong> Luck: 803 | Cap: 25 | Spd: 20 (because of potions)
        </div>
    </div>

    <div class="panel">
        <h2>Equipped Gear</h2>
        <div class="equipment-grid">
            <div class="slot">
                <label>Necklace</label>
<select id="slot-neck" onchange="calculate()">
    <option value="none">Empty</option>
    <option value="venomshank">Venomshank</option>
    <option value="santa_bag">Santa's Bag</option>
</select>
                </select>
            </div>
            <div class="slot">
                <label>Charm</label>
                <select id="slot-charm" onchange="calculate()">
    <option value="none">Empty</option>
    <option value="witch_hat">Witch Hat</option>
    <option value="timelock_soul">Timelock Soul</option>
</select>
            </div>
        </div>

        <h3>Rings (8 Slots)</h3>
        <div class="ring-slots-grid" id="ring-container"></div>
        <p style="font-size:0.7rem; color:#666; margin-top:10px;">* Note: Ring of Champions is unique.</p>
    </div>

    <div class="panel">
        <h2>Final Output</h2>
        <div class="stat-card"><span>Total Luck:</span> <span id="stat-luck">0</span></div>
        <div class="stat-card"><span>Total Capacity:</span> <span id="stat-cap">0</span></div>
        <div class="stat-card"><span>Total Shake Str:</span> <span id="stat-str">0</span></div>
        <div class="stat-card"><span>Total Shake Spd:</span> <span id="stat-spd">0</span></div>
        <div class="stat-card"><span>Shakes Per Second (r):</span> <span id="stat-r">0</span></div>
<div class="stat-item">
    <span>Luck Multi:</span>
    <span id="multi-luck-display">1.00x</span>
</div>
<div class="stat-item">
    <span>Cap Multi:</span>
    <span id="multi-cap-display">1.00x</span>
</div>
<div class="stat-item">
    <span>Spd Multi:</span>
    <span id="multi-spd-display">1.00x</span>
</div>
<div class="stat-item">
    <span>Str Multi:</span>
    <span id="multi-str-display">1.00x</span>
</div>
        <div class="panel">
    <h2>Final Output</h2>
    <hr style="border: 0; border-top: 1px solid #333; margin: 15px 0;">
    
    <h3 style="color: #666; font-size: 0.75rem; text-transform: uppercase;">Raw Base Stats (Pre-Multi)</h3>
    <div class="stat-card" style="color: #888;"><span>Base Luck:</span> <span id="base-luck-val">0</span></div>
    <div class="stat-card" style="color: #888;"><span>Base Cap:</span> <span id="base-cap-val">0</span></div>
    <div class="stat-card" style="color: #888;"><span>Base Str:</span> <span id="base-str-val">0</span></div>
    <div class="stat-card" style="color: #888;"><span>Base Spd:</span> <span id="base-spd-val">0</span></div>
    
    </div>
        <div class="big-result">
            <div style="font-size:0.75rem; color:var(--accent); text-transform:uppercase;">Rerolls Per Second</div>
            <h1 id="result-rps">0.00</h1>
        </div>
    </div>
</div>

<script>
const itemData = {
        rings: {
            purifying: { name: "Purifying Ring", luck: 144, cap: 176, str: 48, spd: 0 },
            vortex: { name: "Vortex Ring", luck: 248, cap: 520, str: 18, spd: 0 },
            // UPDATED: Fixed Otherworldly to 35 base speed
            otherworldly: { name: "Otherworldly Ring", luck: 600, cap: 0, str: 0, spd: 35 }, 
            umbrite: { name: "Umbrite Ring", luck: 392, cap: 160, str: 18, spd: 0 },
            champions: { name: "Ring of Champions", luck: 880, cap: 720, str: 88, spd: 160, unique: true }
        },
        neck: {
            venomshank: { luck: 2080, cap: 0, spd: 0 },
            santa_bag: { luck: 1080, cap: 880, spd: 0 }
        },
        charms: {
            witch_hat: { luck: 1760, cap: 0, spd: 44 },
            timelock_soul: { luck: 1598, cap: 0, spd: 176 }
        }
    };

    const speedTable = [
        { s: 250, r: 6.031 }, { s: 300, r: 6.906 }, { s: 350, r: 6.620 },
        { s: 400, r: 6.793 }, { s: 450, r: 9.119 }, { s: 500, r: 9.817 },
        { s: 550, r: 9.940 }, { s: 600, r: 10.461 }, { s: 650, r: 10.267 },
        { s: 710, r: 10.027 }, { s: 760, r: 9.119 }, { s: 810, r: 11.848 },
        { s: 860, r: 11.943 }, { s: 909, r: 12.325 }, { s: 939, r: 12.542 },
        { s: 989, r: 13.979 }, { s: 1039, r: 14.691 }, { s: 1069, r: 14.866 },
        { s: 1119, r: 13.953 }, { s: 1169, r: 11.592 }, { s: 1199, r: 14.299 },
        { s: 1249, r: 14.720 }, { s: 1299, r: 14.735 }, { s: 1329, r: 14.881 },
        { s: 1379, r: 14.451 }, { s: 1429, r: 12.658 }, { s: 1509, r: 11.981 },
        { s: 1559, r: 14.606 }, { s: 1689, r: 14.634 }, { s: 1731, r: 14.620 },
        { s: 1761, r: 12.853 }, { s: 1811, r: 15.259 }, { s: 1861, r: 15.385 },
        { s: 1941, r: 16.146 }, { s: 1991, r: 16.393 }, { s: 2121, r: 18.204 },
        { s: 2168, r: 14.313 }, { s: 2211, r: 19.231 }, { s: 2355, r: 19.608 }
    ];

    const pans = {
        blightflow: { luck: 500, cap: 400, str: 30, spd: 200 },
        gingerbread: { luck: 400, cap: 400, str: 25, spd: 120 },
        abyssal: { luck: 700, cap: 250, str: 8, spd: 110 }
    };

    const voidtornBonus = { "Common": 0.005, "Uncommon": 0.0075, "Rare": 0.0125, "Epic": 0.02, "Legendary": 0.03, "Mythic": 0.05, "Exotic": 0.08 };

    const museumData = {
        "Common": [ { name: "Pyrite", buff: "cap", val: 0.05 }, { name: "Seashell", buff: "cap", val: 0.05 }, { name: "Copper", buff: "size", val: 0.04 }, { name: "Obsidian", buff: "size", val: 0.04 }, { name: "Amethyst", buff: "dig", val: 0.05 }, { name: "Blue Ice", buff: "dig", val: 0.05 }, { name: "Platinum", buff: "dig", val: 0.05 }, { name: "Pearl", buff: "spd", val: 0.05 }, { name: "Silver", buff: "spd", val: 0.05 }, { name: "Gold", buff: "sell", val: 0.05 } ],
        "Uncommon": [ { name: "Coral", buff: "cap", val: 0.08 }, { name: "Topaz", buff: "cap", val: 0.08 }, { name: "Zircon", buff: "size", val: 0.05 }, { name: "Rock Candy", buff: "size", val: 0.05 }, { name: "Neodymium", buff: "str", val: 0.08 }, { name: "Smoky Quartz", buff: "str", val: 0.08 }, { name: "Sapphire", buff: "dig", val: 0.08 }, { name: "Titanium", buff: "dig", val: 0.08 }, { name: "Malachite", buff: "mod", val: 0.08 }, { name: "Glowberry", buff: "sell", val: 0.08 }, { name: "Electrum", buff: "sell", val: 0.08 } ],
        "Rare": [ { name: "Peridot", buff: "luck", val: 0.13 }, { name: "Meteoric Iron", buff: "str", val: 0.13 }, { name: "Ruby", buff: "str", val: 0.13 }, { name: "Azuralite", buff: "dig", val: 0.13 }, { name: "Glacial Quartz", buff: "dig", val: 0.13 }, { name: "Lapis Lazuli", buff: "dig", val: 0.13 }, { name: "Gloomberry", buff: "dig", val: 0.13 }, { name: "Jade", buff: "mod", val: 0.13 }, { name: "Onyx", buff: "mod", val: 0.13 }, { name: "Diopside", buff: "mod", val: 0.13 }, { name: "Amber", buff: "sell", val: 0.13 }, { name: "Pyrelith", buff: "sell", val: 0.13 }, { name: "Candy Cane", buff: "size", val: 0.09 }, { name: "Silver Clamshell", buff: "spd", val: 0.13 } ],
        "Epic": [ { name: "Emerald", buff: "luck", val: 0.20 }, { name: "Ammonite Fossil", buff: "cap", val: 0.20 }, { name: "Golden Pearl", buff: "cap", val: 0.20 }, { name: "Osmium", buff: "size", val: 0.20 }, { name: "Ashvein", buff: "size", val: 0.14 }, { name: "Bone", buff: "size", val: 0.14 }, { name: "Mercury", buff: "str", val: 0.20 }, { name: "Aurorite", buff: "dig", val: 0.20 }, { name: "Borealite", buff: "dig", val: 0.20 }, { name: "Cobalt", buff: "dig", val: 0.20 }, { name: "Iridium", buff: "dig", val: 0.20 }, { name: "Lightshard", buff: "dig", val: 0.20 }, { name: "Moonstone", buff: "spd", val: 0.20 }, { name: "Opal", buff: "spd", val: 0.20 }, { name: "Glowmoss", buff: "mod", val: 0.20 }, { name: "Pyronium", buff: "sell", val: 0.20 } ],
        "Legendary": [ { name: "Diamond", buff: "luck", val: 0.30 }, { name: "Catseye", buff: "cap", val: 0.30 }, { name: "Firefly Stone", buff: "cap", val: 0.30 }, { name: "Luminum", buff: "cap", val: 0.30 }, { name: "Volcanic Key", buff: "size", val: 0.21 }, { name: "Fire Opal", buff: "size", val: 0.21 }, { name: "Cinnabar", buff: "size", val: 0.21 }, { name: "Dragon Bone", buff: "size", val: 0.21 }, { name: "Rose Gold", buff: "str", val: 0.30 }, { name: "Aetherite", buff: "dig", val: 0.30 }, { name: "Aquamarine", buff: "dig", val: 0.30 }, { name: "Lost Soul", buff: "dig", val: 0.30 }, { name: "Bismuth", buff: "dig", val: 0.30 }, { name: "Gloomcap", buff: "dig", val: 0.30 }, { name: "Starshine", buff: "dig_spd", val: 0.15 }, { name: "Specterite", buff: "spd", val: 0.30 }, { name: "Peppermint Prism", buff: "mod", val: 0.30 }, { name: "Uranium", buff: "mod", val: 0.30 }, { name: "Radium", buff: "mod", val: 0.30 }, { name: "Tourmaline", buff: "sell", val: 0.30 }, { name: "Palladium", buff: "sell", val: 0.30 } ],
        "Mythic": [ { name: "Flarebloom", buff: "luck_size", val: [0.75, -0.5] }, { name: "Inferlume", buff: "luck", val: 0.50 }, { name: "Pink Diamond", buff: "luck", val: 0.50 }, { name: "Chrysoberyl", buff: "luck", val: 0.50 }, { name: "Prismara", buff: "luck_cap_str_dig", val: 0.25 }, { name: "Vortessence", buff: "cap", val: 0.50 }, { name: "Painite", buff: "size", val: 0.35 }, { name: "Star Garnet", buff: "size", val: 0.35 }, { name: "Red Beryl", buff: "size", val: 0.35 }, { name: "Volcanic Core", buff: "size_dig", val: [0.2, 0.25] }, { name: "Frostshard", buff: "dig_str", val: 0.50 }, { name: "Mythril", buff: "str", val: 0.50 }, { name: "Radiant Gold", buff: "sell", val: 0.50 } ],
        "Exotic": [ { name: "Vineheart", buff: "luck", val: 0.80 }, { name: "Voidstone", buff: "luck_cap", val: 0.40 }, { name: "North Star", buff: "luck_cap_spd_dig", val: 0.20 }, { name: "Eternium", buff: "luck_spd_dig", val: 0.32 }, { name: "Dinosaur Skull", buff: "size_sell", val: [0.32, 0.4] }, { name: "Pumpkin Soul", buff: "size", val: 0.56 }, { name: "Bloodstone", buff: "size", val: 0.56 }, { name: "Cryonic Artifact", buff: "dig_str_spd", val: [1.2, 1.2, -0.8] }, { name: "Astral Spore", buff: "dig", val: 0.80 }, { name: "Umbrite", buff: "dig_spd", val: 0.40 }, { name: "Adamantine", buff: "mod", val: 0.80 } ]
    };

    function toggleMuseum() {
        const overlay = document.getElementById('museum-overlay');
        overlay.style.display = overlay.style.display === 'block' ? 'none' : 'block';
    }

    function initRings() {
        const container = document.getElementById('ring-container');
        if (!container) return;
        container.innerHTML = ""; 
        for(let i=1; i<=8; i++) {
            const div = document.createElement('div');
            div.className = 'slot';
            div.innerHTML = `<label>Slot ${i}</label><select id="ring-${i}" onchange="validateRings(${i})">
                <option value="none">Empty</option>
                ${Object.entries(itemData.rings).map(([k,v]) => `<option value="${k}">${v.name}</option>`).join('')}
            </select>`;
            container.appendChild(div);
        }
    }

    function validateRings(changedIndex) {
        const ringSelects = Array.from({length: 8}, (_, i) => document.getElementById(`ring-${i+1}`));
        const championCount = ringSelects.filter(s => s && s.value === 'champions').length;
        if (championCount > 1) {
            alert("You can only equip one Ring of Champions at a time!");
            document.getElementById(`ring-${changedIndex}`).value = "none";
        }
        calculate();
    }

    function renderMuseum() {
        const container = document.getElementById('museum-container');
        if (!container) return;
        container.innerHTML = "";
        for (const [rarity, ores] of Object.entries(museumData)) {
            const section = document.createElement('div');
            section.className = 'museum-rarity';
            section.innerHTML = `<h3 class="${rarity}">${rarity}</h3><div class="ore-grid" id="grid-${rarity}"></div>`;
            container.appendChild(section);
            const grid = document.getElementById(`grid-${rarity}`);
            ores.forEach(ore => {
                const label = document.createElement('label');
                label.className = 'ore-toggle';
                label.innerHTML = `<input type="checkbox" class="museum-box" data-rarity="${rarity}" data-buff="${ore.buff}" data-val='${JSON.stringify(ore.val)}' onchange="calculate()">${ore.name}`;
                grid.appendChild(label);
            });
        }
    }

    function calculate() {
        let L = 803, C = 25, S = 0, Str = 0;
        let multiL = 0, multiC = 0.05, multiS = 0, multiStr = 0;

        const pan = pans[document.getElementById('equip-pan').value];
        if (pan) { 
            L += pan.luck; 
            C += pan.cap; 
            S += (pan.spd || 0); 
            Str += pan.str; 
        }

        const enc = document.getElementById('pan-enchant').value;
        if (enc === 'glowing') S += 25; 
        if (enc === 'cosmic') { C += 50; Str += 3; }

        const neck = itemData.neck[document.getElementById('slot-neck').value];
        if (neck) { L += neck.luck; S += (neck.spd || 0); C += (neck.cap || 0); }

        const charm = itemData.charms[document.getElementById('slot-charm').value];
        if (charm) { L += charm.luck; S += (charm.spd || 0); C += (charm.cap || 0); }

        for(let i=1; i<=8; i++) {
            const ringElement = document.getElementById(`ring-${i}`);
            if (!ringElement) continue;
            const ringKey = ringElement.value;
            const ring = itemData.rings[ringKey];
            if (ring) {
                L += ring.luck;
                C += ring.cap;
                Str += ring.str;
                S += (ring.spd || 0); 
            }
        } 

        // Shovel Enchants
        const shovel = document.getElementById('shovel-enchant').value;
        if (shovel === 'non_euclidian') multiC += 1.0;
        if (shovel === 'rhythmic') multiL += 0.3;
        
        // Passives & Runes
        if (document.getElementById('mastery-luck').checked) multiL += 0.25;
        if (document.getElementById('runes-luck').checked) multiL += 1.2; 
        if (document.getElementById('runes-spd').checked) ; 
        if (document.getElementById('prospector-mvp').checked) {
            multiL += 0.15;
            multiC += 0.15;
        }

        // Totems
        if (document.getElementById('totem-luck').checked) multiL += 1.0;
        if (document.getElementById('totem-str').checked) multiStr += 1.0;
        if (document.getElementById('totem-lumi').checked) {
            multiC += 0.5;
        }

        // Museum Logic
        document.querySelectorAll('.museum-box:checked').forEach(box => {
            const rRarity = box.dataset.rarity;
            const bType = box.dataset.buff;
            const vVal = JSON.parse(box.dataset.val);
            multiL += voidtornBonus[rRarity]; 
            multiC += voidtornBonus[rRarity];

            if (bType.includes('luck')) multiL += Array.isArray(vVal) ? vVal[0] : vVal;
            if (bType.includes('cap')) multiC += Array.isArray(vVal) ? vVal[0] : vVal;
            if (bType.includes('str')) multiStr += Array.isArray(vVal) ? vVal[1] : vVal;
            if (bType.includes('spd')) multiS += Array.isArray(vVal) ? vVal[2] : vVal;
        });

// --- 6. FINAL TOTALS ---
    const totalL = L * (1 + multiL);
    const totalC = C * (1 + multiC);
    const totalStr = Str * (1 + multiStr);

    // SPEED LOGIC: Only multiply the gear (S), then add Totem/Runes as flat values
    let multipliedS = S * (1 + multiS); 
    let flatSpdAdditions = 20;
    if (document.getElementById('totem-lumi').checked) flatSpdAdditions += 50;
    if (document.getElementById('runes-spd').checked) flatSpdAdditions += 25;

    const totalS = multipliedS + flatSpdAdditions;

    // --- 7. RPS CALCULATION ---
    let rVal = 1;
    for (let entry of speedTable) { if (totalS >= entry.s) rVal = entry.r; }
    const rps = (totalL * Math.sqrt(totalC)) / ((totalC / (rVal * totalStr)) + 2.5);

    // --- 8. UPDATE UI ---
    // Standard Outputs
    document.getElementById('stat-luck').innerText = Math.floor(totalL).toLocaleString();
    document.getElementById('stat-cap').innerText = Math.floor(totalC).toLocaleString();
    document.getElementById('stat-str').innerText = totalStr.toFixed(1);
    document.getElementById('stat-spd').innerText = totalS.toFixed(1);
    document.getElementById('result-rps').innerText = rps.toFixed(2);

    // Multiplier Displays
    document.getElementById('multi-luck-display').innerText = (1 + multiL).toFixed(2) + "x";
    document.getElementById('multi-cap-display').innerText = (1 + multiC).toFixed(2) + "x";
    document.getElementById('multi-spd-display').innerText = (1 + multiS).toFixed(2) + "x";
    document.getElementById('multi-str-display').innerText = (1 + multiStr).toFixed(2) + "x";

    // DEBUG: RAW BASE STATS
    // These should match the "Base" row in your spreadsheet
    document.getElementById('base-luck-val').innerText = L.toLocaleString();
    document.getElementById('base-cap-val').innerText = C.toLocaleString();
    document.getElementById('base-str-val').innerText = Str.toFixed(1);
    document.getElementById('base-spd-val').innerText = (S + flatSpdAdditions).toFixed(1);
    }

    window.onload = function() {
        initRings();
        renderMuseum();
        calculate();
    };
</script>
</body>
</html>
